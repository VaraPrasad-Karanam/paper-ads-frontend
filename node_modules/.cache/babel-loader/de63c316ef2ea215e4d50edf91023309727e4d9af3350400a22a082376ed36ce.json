{"ast":null,"code":"var _jsxFileName = \"D:\\\\paper-ads-website\\\\frontend\\\\src\\\\components\\\\UploadForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useCallback } from 'react';\nimport { uploadAd, uploadMultipleAds, createCategory } from '../services/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UploadForm = ({\n  categories,\n  onClose,\n  onSuccess\n}) => {\n  _s();\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [newCategoryName, setNewCategoryName] = useState('');\n  const [isCreatingCategory, setIsCreatingCategory] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [error, setError] = useState('');\n  const [showImageEditor, setShowImageEditor] = useState(false);\n  const [currentEditingImage, setCurrentEditingImage] = useState(null);\n  const [currentEditingIndex, setCurrentEditingIndex] = useState(null);\n  const fileInputRef = useRef();\n  const cameraInputRef = useRef();\n  const canvasRef = useRef();\n\n  // Image enhancement functions\n  const applyDocumentScanFilter = (canvas, ctx, imageData, filterType) => {\n    const data = imageData.data;\n    const width = imageData.width;\n    const height = imageData.height;\n    switch (filterType) {\n      case 'auto':\n        // Auto contrast + brightness + sharpen\n        applyAutoContrast(data);\n        applyBrightnessContrast(data, 10, 1.2);\n        applySharpen(data, width, height);\n        break;\n      case 'blackwhite':\n        // High contrast black and white\n        applyBlackWhite(data);\n        applyAutoContrast(data);\n        break;\n      case 'grayscale':\n        // Grayscale with enhanced contrast\n        applyGrayscale(data);\n        applyBrightnessContrast(data, 15, 1.3);\n        break;\n      case 'whitening':\n        // Document whitening\n        applyWhitening(data);\n        applyBrightnessContrast(data, 20, 1.1);\n        break;\n      case 'sharpen':\n        // Enhanced sharpening\n        applySharpen(data, width, height);\n        applyBrightnessContrast(data, 5, 1.1);\n        break;\n      case 'vintage':\n        // Vintage document look\n        applyVintage(data);\n        break;\n      default:\n        break;\n    }\n    ctx.putImageData(imageData, 0, 0);\n  };\n  const applyAutoContrast = data => {\n    let min = 255,\n      max = 0;\n    for (let i = 0; i < data.length; i += 4) {\n      const gray = data[i] * 0.299 + data[i + 1] * 0.587 + data[i + 2] * 0.114;\n      min = Math.min(min, gray);\n      max = Math.max(max, gray);\n    }\n    const range = max - min;\n    if (range === 0) return;\n    for (let i = 0; i < data.length; i += 4) {\n      data[i] = Math.min(255, Math.max(0, (data[i] - min) * 255 / range));\n      data[i + 1] = Math.min(255, Math.max(0, (data[i + 1] - min) * 255 / range));\n      data[i + 2] = Math.min(255, Math.max(0, (data[i + 2] - min) * 255 / range));\n    }\n  };\n  const applyBrightnessContrast = (data, brightness, contrast) => {\n    const factor = 259 * (contrast * 100 + 255) / (255 * (259 - contrast * 100));\n    for (let i = 0; i < data.length; i += 4) {\n      data[i] = Math.min(255, Math.max(0, factor * (data[i] - 128) + 128 + brightness));\n      data[i + 1] = Math.min(255, Math.max(0, factor * (data[i + 1] - 128) + 128 + brightness));\n      data[i + 2] = Math.min(255, Math.max(0, factor * (data[i + 2] - 128) + 128 + brightness));\n    }\n  };\n  const applyBlackWhite = data => {\n    for (let i = 0; i < data.length; i += 4) {\n      const gray = data[i] * 0.299 + data[i + 1] * 0.587 + data[i + 2] * 0.114;\n      const bw = gray > 128 ? 255 : 0;\n      data[i] = data[i + 1] = data[i + 2] = bw;\n    }\n  };\n  const applyGrayscale = data => {\n    for (let i = 0; i < data.length; i += 4) {\n      const gray = data[i] * 0.299 + data[i + 1] * 0.587 + data[i + 2] * 0.114;\n      data[i] = data[i + 1] = data[i + 2] = gray;\n    }\n  };\n  const applyWhitening = data => {\n    for (let i = 0; i < data.length; i += 4) {\n      data[i] = Math.min(255, data[i] + 30);\n      data[i + 1] = Math.min(255, data[i + 1] + 30);\n      data[i + 2] = Math.min(255, data[i + 2] + 30);\n    }\n  };\n  const applySharpen = (data, width, height) => {\n    const sharpenKernel = [0, -1, 0, -1, 5, -1, 0, -1, 0];\n    const output = new Uint8ClampedArray(data);\n    for (let y = 1; y < height - 1; y++) {\n      for (let x = 1; x < width - 1; x++) {\n        for (let c = 0; c < 3; c++) {\n          let sum = 0;\n          for (let ky = -1; ky <= 1; ky++) {\n            for (let kx = -1; kx <= 1; kx++) {\n              const idx = ((y + ky) * width + (x + kx)) * 4 + c;\n              sum += data[idx] * sharpenKernel[(ky + 1) * 3 + (kx + 1)];\n            }\n          }\n          output[(y * width + x) * 4 + c] = Math.min(255, Math.max(0, sum));\n        }\n      }\n    }\n    for (let i = 0; i < data.length; i++) {\n      data[i] = output[i];\n    }\n  };\n  const applyVintage = data => {\n    for (let i = 0; i < data.length; i += 4) {\n      const r = data[i];\n      const g = data[i + 1];\n      const b = data[i + 2];\n      data[i] = Math.min(255, r * 0.9 + g * 0.5 + b * 0.1);\n      data[i + 1] = Math.min(255, r * 0.3 + g * 0.8 + b * 0.1);\n      data[i + 2] = Math.min(255, r * 0.2 + g * 0.3 + b * 0.5);\n    }\n  };\n  const openImageEditor = (file, index) => {\n    setCurrentEditingImage(file);\n    setCurrentEditingIndex(index);\n    setShowImageEditor(true);\n  };\n  const applyFilterAndSave = filterType => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const img = new Image();\n    img.onload = () => {\n      canvas.width = img.width;\n      canvas.height = img.height;\n      ctx.drawImage(img, 0, 0);\n      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      applyDocumentScanFilter(canvas, ctx, imageData, filterType);\n      canvas.toBlob(blob => {\n        const enhancedFile = new File([blob], currentEditingImage.name, {\n          type: 'image/jpeg',\n          lastModified: Date.now()\n        });\n        const newFiles = [...selectedFiles];\n        newFiles[currentEditingIndex] = enhancedFile;\n        setSelectedFiles(newFiles);\n        setShowImageEditor(false);\n      }, 'image/jpeg', 0.9);\n    };\n    img.src = URL.createObjectURL(currentEditingImage);\n  };\n  const handleFileSelect = useCallback(files => {\n    const validFiles = Array.from(files).filter(file => {\n      const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'application/pdf'];\n      return validTypes.includes(file.type) && file.size <= 10 * 1024 * 1024;\n    });\n    if (validFiles.length !== files.length) {\n      setError('Some files were invalid. Only JPEG, PNG, and PDF files under 10MB are allowed.');\n    } else {\n      setError('');\n    }\n    setSelectedFiles(prev => [...prev, ...validFiles]);\n  }, []);\n  const handleDrop = useCallback(e => {\n    e.preventDefault();\n    e.currentTarget.classList.remove('dragover');\n    handleFileSelect(e.dataTransfer.files);\n  }, [handleFileSelect]);\n  const handleDragOver = useCallback(e => {\n    e.preventDefault();\n  }, []);\n  const handleDragEnter = useCallback(e => {\n    e.preventDefault();\n    e.currentTarget.classList.add('dragover');\n  }, []);\n  const handleDragLeave = useCallback(e => {\n    e.preventDefault();\n    e.currentTarget.classList.remove('dragover');\n  }, []);\n  const removeFile = useCallback(index => {\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\n  }, []);\n  const createNewCategory = async () => {\n    if (!newCategoryName.trim()) return null;\n    try {\n      const category = await createCategory({\n        name: newCategoryName.trim()\n      });\n      return category._id;\n    } catch (error) {\n      setError('Failed to create category');\n      return null;\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (selectedFiles.length === 0) {\n      setError('Please select at least one file');\n      return;\n    }\n    let categoryId = selectedCategory;\n    if (isCreatingCategory) {\n      categoryId = await createNewCategory();\n      if (!categoryId) return;\n    }\n    if (!categoryId) {\n      setError('Please select or create a category');\n      return;\n    }\n    setUploading(true);\n    setError('');\n    try {\n      const formData = new FormData();\n      if (selectedFiles.length === 1) {\n        formData.append('image', selectedFiles[0]);\n        formData.append('title', title || selectedFiles[0].name);\n        formData.append('description', description);\n        formData.append('category', categoryId);\n        await uploadAd(formData, progressEvent => {\n          const progress = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n          setUploadProgress(progress);\n        });\n      } else {\n        selectedFiles.forEach(file => {\n          formData.append('images', file);\n        });\n        const titles = selectedFiles.map(file => title || file.name);\n        const descriptions = selectedFiles.map(() => description);\n        formData.append('titles', JSON.stringify(titles));\n        formData.append('descriptions', JSON.stringify(descriptions));\n        formData.append('category', categoryId);\n        await uploadMultipleAds(formData, progressEvent => {\n          const progress = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n          setUploadProgress(progress);\n        });\n      }\n      onSuccess();\n    } catch (error) {\n      setError('Upload failed. Please try again.');\n      console.error('Upload error:', error);\n    } finally {\n      setUploading(false);\n      setUploadProgress(0);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: onClose,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Upload New Ad\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-btn\",\n            onClick: onClose,\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"upload-form\",\n          onSubmit: handleSubmit,\n          children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                gap: '10px',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-control\",\n                value: isCreatingCategory ? '' : selectedCategory,\n                onChange: e => {\n                  setSelectedCategory(e.target.value);\n                  setIsCreatingCategory(false);\n                },\n                disabled: isCreatingCategory,\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 317,\n                  columnNumber: 19\n                }, this), categories.map(cat => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: cat._id,\n                  children: cat.name\n                }, cat._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 21\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-secondary\",\n                onClick: () => setIsCreatingCategory(!isCreatingCategory),\n                children: isCreatingCategory ? 'Cancel' : 'New'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this), isCreatingCategory && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"New Category Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              value: newCategoryName,\n              onChange: e => setNewCategoryName(e.target.value),\n              placeholder: \"Enter category name\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"Title \", selectedFiles.length > 1 && '(will be applied to all files)']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              value: title,\n              onChange: e => setTitle(e.target.value),\n              placeholder: \"Enter ad title (optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [\"Description \", selectedFiles.length > 1 && '(will be applied to all files)']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"form-control\",\n              value: description,\n              onChange: e => setDescription(e.target.value),\n              placeholder: \"Enter ad description (optional)\",\n              rows: \"3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Images/Files\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upload-options\",\n              style: {\n                display: \"flex\",\n                flexDirection: \"column\",\n                gap: \"12px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"file-drop-zone\",\n                onDrop: handleDrop,\n                onDragOver: handleDragOver,\n                onDragEnter: handleDragEnter,\n                onDragLeave: handleDragLeave,\n                onClick: () => {\n                  var _fileInputRef$current;\n                  return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n                },\n                style: {\n                  cursor: \"pointer\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Drag and drop files here or click to select\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontSize: '0.8rem',\n                    color: '#7f8c8d'\n                  },\n                  children: \"Supported: JPEG, PNG, PDF (Max 10MB each)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn\",\n                style: {\n                  background: \"#f3f4f6\",\n                  color: \"#23244c\",\n                  border: \"1px solid #d1d5db\",\n                  fontWeight: \"600\"\n                },\n                onClick: () => {\n                  var _cameraInputRef$curre;\n                  return (_cameraInputRef$curre = cameraInputRef.current) === null || _cameraInputRef$curre === void 0 ? void 0 : _cameraInputRef$curre.click();\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    fontSize: \"1.5rem\",\n                    marginRight: \"0.3rem\"\n                  },\n                  children: \"\\uD83D\\uDCF7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 19\n                }, this), \"Take Photo (use camera)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              ref: cameraInputRef,\n              type: \"file\",\n              accept: \"image/*\",\n              capture: \"environment\",\n              style: {\n                display: 'none'\n              },\n              onChange: e => handleFileSelect(e.target.files)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              ref: fileInputRef,\n              type: \"file\",\n              multiple: true,\n              accept: \".jpg,.jpeg,.png,.pdf\",\n              style: {\n                display: 'none'\n              },\n              onChange: e => handleFileSelect(e.target.files)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this), selectedFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"file-preview\",\n            children: selectedFiles.map((file, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"file-preview-item\",\n              children: [file.type.startsWith('image/') ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: URL.createObjectURL(file),\n                  alt: file.name,\n                  className: \"file-preview-image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 425,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"enhance-btn\",\n                  onClick: () => openImageEditor(file, index),\n                  style: {\n                    position: 'absolute',\n                    bottom: '4px',\n                    left: '4px',\n                    background: '#4f46e5',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    padding: '2px 6px',\n                    fontSize: '10px',\n                    cursor: 'pointer'\n                  },\n                  children: \"\\u2728 Enhance\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 430,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"file-preview-image\",\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  background: '#ecf0f1',\n                  fontSize: '12px',\n                  textAlign: 'center'\n                },\n                children: \"PDF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"file-remove-btn\",\n                onClick: () => removeFile(index),\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 15\n          }, this), uploading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"upload-progress\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upload-progress-bar\",\n              style: {\n                width: `${uploadProgress}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                textAlign: 'center',\n                marginTop: '10px'\n              },\n              children: [\"Uploading... \", uploadProgress, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '10px',\n              marginTop: '20px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary\",\n              disabled: uploading || selectedFiles.length === 0,\n              style: {\n                flex: 1\n              },\n              children: uploading ? 'Uploading...' : `Upload ${selectedFiles.length} file(s)`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-secondary\",\n              onClick: onClose,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this), showImageEditor && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      style: {\n        zIndex: 3000\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        style: {\n          maxWidth: '800px'\n        },\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\uD83D\\uDD27 Enhance Document\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 508,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-btn\",\n            onClick: () => setShowImageEditor(false),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '1.5rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '1.5rem',\n              textAlign: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: URL.createObjectURL(currentEditingImage),\n              alt: \"Preview\",\n              style: {\n                maxWidth: '100%',\n                maxHeight: '300px',\n                border: '2px solid #e5e7eb',\n                borderRadius: '8px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '1.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                marginBottom: '1rem',\n                color: '#374151'\n              },\n              children: \"Choose Enhancement:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'grid',\n                gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',\n                gap: '0.75rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn\",\n                onClick: () => applyFilterAndSave('auto'),\n                style: {\n                  background: 'linear-gradient(135deg, #4f46e5, #7c3aed)',\n                  color: 'white',\n                  border: 'none',\n                  padding: '0.75rem',\n                  fontSize: '0.875rem',\n                  fontWeight: '600'\n                },\n                children: \"\\uD83D\\uDE80 Auto Scan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn\",\n                onClick: () => applyFilterAndSave('blackwhite'),\n                style: {\n                  background: '#1f2937',\n                  color: 'white',\n                  border: 'none',\n                  padding: '0.75rem',\n                  fontSize: '0.875rem',\n                  fontWeight: '600'\n                },\n                children: \"\\u26AB Black & White\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 548,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn\",\n                onClick: () => applyFilterAndSave('grayscale'),\n                style: {\n                  background: '#6b7280',\n                  color: 'white',\n                  border: 'none',\n                  padding: '0.75rem',\n                  fontSize: '0.875rem',\n                  fontWeight: '600'\n                },\n                children: \"\\uD83C\\uDF2B\\uFE0F Grayscale\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 563,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn\",\n                onClick: () => applyFilterAndSave('whitening'),\n                style: {\n                  background: '#f3f4f6',\n                  color: '#374151',\n                  border: '2px solid #d1d5db',\n                  padding: '0.75rem',\n                  fontSize: '0.875rem',\n                  fontWeight: '600'\n                },\n                children: \"\\u2600\\uFE0F Whitening\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn\",\n                onClick: () => applyFilterAndSave('sharpen'),\n                style: {\n                  background: '#10b981',\n                  color: 'white',\n                  border: 'none',\n                  padding: '0.75rem',\n                  fontSize: '0.875rem',\n                  fontWeight: '600'\n                },\n                children: \"\\uD83D\\uDD0D Sharpen\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 593,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn\",\n                onClick: () => applyFilterAndSave('vintage'),\n                style: {\n                  background: '#d97706',\n                  color: 'white',\n                  border: 'none',\n                  padding: '0.75rem',\n                  fontSize: '0.875rem',\n                  fontWeight: '600'\n                },\n                children: \"\\uD83D\\uDCDC Vintage\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 528,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-secondary\",\n              onClick: () => setShowImageEditor(false),\n              style: {\n                padding: '0.75rem 1.5rem'\n              },\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 627,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 641,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(UploadForm, \"FRh3SPWRTL2RaA8Uj2mI/hMpwg4=\");\n_c = UploadForm;\nexport default UploadForm;\nvar _c;\n$RefreshReg$(_c, \"UploadForm\");","map":{"version":3,"names":["React","useState","useRef","useCallback","uploadAd","uploadMultipleAds","createCategory","jsxDEV","_jsxDEV","Fragment","_Fragment","UploadForm","categories","onClose","onSuccess","_s","selectedFiles","setSelectedFiles","title","setTitle","description","setDescription","selectedCategory","setSelectedCategory","newCategoryName","setNewCategoryName","isCreatingCategory","setIsCreatingCategory","uploading","setUploading","uploadProgress","setUploadProgress","error","setError","showImageEditor","setShowImageEditor","currentEditingImage","setCurrentEditingImage","currentEditingIndex","setCurrentEditingIndex","fileInputRef","cameraInputRef","canvasRef","applyDocumentScanFilter","canvas","ctx","imageData","filterType","data","width","height","applyAutoContrast","applyBrightnessContrast","applySharpen","applyBlackWhite","applyGrayscale","applyWhitening","applyVintage","putImageData","min","max","i","length","gray","Math","range","brightness","contrast","factor","bw","sharpenKernel","output","Uint8ClampedArray","y","x","c","sum","ky","kx","idx","r","g","b","openImageEditor","file","index","applyFilterAndSave","current","getContext","img","Image","onload","drawImage","getImageData","toBlob","blob","enhancedFile","File","name","type","lastModified","Date","now","newFiles","src","URL","createObjectURL","handleFileSelect","files","validFiles","Array","from","filter","validTypes","includes","size","prev","handleDrop","e","preventDefault","currentTarget","classList","remove","dataTransfer","handleDragOver","handleDragEnter","add","handleDragLeave","removeFile","_","createNewCategory","trim","category","_id","handleSubmit","categoryId","formData","FormData","append","progressEvent","progress","round","loaded","total","forEach","titles","map","descriptions","JSON","stringify","console","children","className","onClick","stopPropagation","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","style","display","gap","alignItems","value","onChange","target","disabled","flex","cat","placeholder","required","rows","flexDirection","onDrop","onDragOver","onDragEnter","onDragLeave","_fileInputRef$current","click","cursor","fontSize","color","background","border","fontWeight","_cameraInputRef$curre","marginRight","ref","accept","capture","multiple","startsWith","alt","position","bottom","left","borderRadius","padding","justifyContent","textAlign","marginTop","zIndex","maxWidth","marginBottom","maxHeight","gridTemplateColumns","_c","$RefreshReg$"],"sources":["D:/paper-ads-website/frontend/src/components/UploadForm.js"],"sourcesContent":["import React, { useState, useRef, useCallback } from 'react';\r\nimport { uploadAd, uploadMultipleAds, createCategory } from '../services/api';\r\n\r\nconst UploadForm = ({ categories, onClose, onSuccess }) => {\r\n  const [selectedFiles, setSelectedFiles] = useState([]);\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState('');\r\n  const [newCategoryName, setNewCategoryName] = useState('');\r\n  const [isCreatingCategory, setIsCreatingCategory] = useState(false);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [error, setError] = useState('');\r\n  const [showImageEditor, setShowImageEditor] = useState(false);\r\n  const [currentEditingImage, setCurrentEditingImage] = useState(null);\r\n  const [currentEditingIndex, setCurrentEditingIndex] = useState(null);\r\n  const fileInputRef = useRef();\r\n  const cameraInputRef = useRef();\r\n  const canvasRef = useRef();\r\n\r\n  // Image enhancement functions\r\n  const applyDocumentScanFilter = (canvas, ctx, imageData, filterType) => {\r\n    const data = imageData.data;\r\n    const width = imageData.width;\r\n    const height = imageData.height;\r\n\r\n    switch (filterType) {\r\n      case 'auto':\r\n        // Auto contrast + brightness + sharpen\r\n        applyAutoContrast(data);\r\n        applyBrightnessContrast(data, 10, 1.2);\r\n        applySharpen(data, width, height);\r\n        break;\r\n      case 'blackwhite':\r\n        // High contrast black and white\r\n        applyBlackWhite(data);\r\n        applyAutoContrast(data);\r\n        break;\r\n      case 'grayscale':\r\n        // Grayscale with enhanced contrast\r\n        applyGrayscale(data);\r\n        applyBrightnessContrast(data, 15, 1.3);\r\n        break;\r\n      case 'whitening':\r\n        // Document whitening\r\n        applyWhitening(data);\r\n        applyBrightnessContrast(data, 20, 1.1);\r\n        break;\r\n      case 'sharpen':\r\n        // Enhanced sharpening\r\n        applySharpen(data, width, height);\r\n        applyBrightnessContrast(data, 5, 1.1);\r\n        break;\r\n      case 'vintage':\r\n        // Vintage document look\r\n        applyVintage(data);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    ctx.putImageData(imageData, 0, 0);\r\n  };\r\n\r\n  const applyAutoContrast = (data) => {\r\n    let min = 255, max = 0;\r\n    for (let i = 0; i < data.length; i += 4) {\r\n      const gray = data[i] * 0.299 + data[i + 1] * 0.587 + data[i + 2] * 0.114;\r\n      min = Math.min(min, gray);\r\n      max = Math.max(max, gray);\r\n    }\r\n    \r\n    const range = max - min;\r\n    if (range === 0) return;\r\n    \r\n    for (let i = 0; i < data.length; i += 4) {\r\n      data[i] = Math.min(255, Math.max(0, (data[i] - min) * 255 / range));\r\n      data[i + 1] = Math.min(255, Math.max(0, (data[i + 1] - min) * 255 / range));\r\n      data[i + 2] = Math.min(255, Math.max(0, (data[i + 2] - min) * 255 / range));\r\n    }\r\n  };\r\n\r\n  const applyBrightnessContrast = (data, brightness, contrast) => {\r\n    const factor = (259 * (contrast * 100 + 255)) / (255 * (259 - contrast * 100));\r\n    for (let i = 0; i < data.length; i += 4) {\r\n      data[i] = Math.min(255, Math.max(0, factor * (data[i] - 128) + 128 + brightness));\r\n      data[i + 1] = Math.min(255, Math.max(0, factor * (data[i + 1] - 128) + 128 + brightness));\r\n      data[i + 2] = Math.min(255, Math.max(0, factor * (data[i + 2] - 128) + 128 + brightness));\r\n    }\r\n  };\r\n\r\n  const applyBlackWhite = (data) => {\r\n    for (let i = 0; i < data.length; i += 4) {\r\n      const gray = data[i] * 0.299 + data[i + 1] * 0.587 + data[i + 2] * 0.114;\r\n      const bw = gray > 128 ? 255 : 0;\r\n      data[i] = data[i + 1] = data[i + 2] = bw;\r\n    }\r\n  };\r\n\r\n  const applyGrayscale = (data) => {\r\n    for (let i = 0; i < data.length; i += 4) {\r\n      const gray = data[i] * 0.299 + data[i + 1] * 0.587 + data[i + 2] * 0.114;\r\n      data[i] = data[i + 1] = data[i + 2] = gray;\r\n    }\r\n  };\r\n\r\n  const applyWhitening = (data) => {\r\n    for (let i = 0; i < data.length; i += 4) {\r\n      data[i] = Math.min(255, data[i] + 30);\r\n      data[i + 1] = Math.min(255, data[i + 1] + 30);\r\n      data[i + 2] = Math.min(255, data[i + 2] + 30);\r\n    }\r\n  };\r\n\r\n  const applySharpen = (data, width, height) => {\r\n    const sharpenKernel = [\r\n      0, -1, 0,\r\n      -1, 5, -1,\r\n      0, -1, 0\r\n    ];\r\n    \r\n    const output = new Uint8ClampedArray(data);\r\n    \r\n    for (let y = 1; y < height - 1; y++) {\r\n      for (let x = 1; x < width - 1; x++) {\r\n        for (let c = 0; c < 3; c++) {\r\n          let sum = 0;\r\n          for (let ky = -1; ky <= 1; ky++) {\r\n            for (let kx = -1; kx <= 1; kx++) {\r\n              const idx = ((y + ky) * width + (x + kx)) * 4 + c;\r\n              sum += data[idx] * sharpenKernel[(ky + 1) * 3 + (kx + 1)];\r\n            }\r\n          }\r\n          output[(y * width + x) * 4 + c] = Math.min(255, Math.max(0, sum));\r\n        }\r\n      }\r\n    }\r\n    \r\n    for (let i = 0; i < data.length; i++) {\r\n      data[i] = output[i];\r\n    }\r\n  };\r\n\r\n  const applyVintage = (data) => {\r\n    for (let i = 0; i < data.length; i += 4) {\r\n      const r = data[i];\r\n      const g = data[i + 1];\r\n      const b = data[i + 2];\r\n      \r\n      data[i] = Math.min(255, r * 0.9 + g * 0.5 + b * 0.1);\r\n      data[i + 1] = Math.min(255, r * 0.3 + g * 0.8 + b * 0.1);\r\n      data[i + 2] = Math.min(255, r * 0.2 + g * 0.3 + b * 0.5);\r\n    }\r\n  };\r\n\r\n  const openImageEditor = (file, index) => {\r\n    setCurrentEditingImage(file);\r\n    setCurrentEditingIndex(index);\r\n    setShowImageEditor(true);\r\n  };\r\n\r\n  const applyFilterAndSave = (filterType) => {\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext('2d');\r\n    const img = new Image();\r\n    \r\n    img.onload = () => {\r\n      canvas.width = img.width;\r\n      canvas.height = img.height;\r\n      ctx.drawImage(img, 0, 0);\r\n      \r\n      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n      applyDocumentScanFilter(canvas, ctx, imageData, filterType);\r\n      \r\n      canvas.toBlob((blob) => {\r\n        const enhancedFile = new File([blob], currentEditingImage.name, {\r\n          type: 'image/jpeg',\r\n          lastModified: Date.now()\r\n        });\r\n        \r\n        const newFiles = [...selectedFiles];\r\n        newFiles[currentEditingIndex] = enhancedFile;\r\n        setSelectedFiles(newFiles);\r\n        setShowImageEditor(false);\r\n      }, 'image/jpeg', 0.9);\r\n    };\r\n    \r\n    img.src = URL.createObjectURL(currentEditingImage);\r\n  };\r\n\r\n  const handleFileSelect = useCallback((files) => {\r\n    const validFiles = Array.from(files).filter(file => {\r\n      const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'application/pdf'];\r\n      return validTypes.includes(file.type) && file.size <= 10 * 1024 * 1024;\r\n    });\r\n\r\n    if (validFiles.length !== files.length) {\r\n      setError('Some files were invalid. Only JPEG, PNG, and PDF files under 10MB are allowed.');\r\n    } else {\r\n      setError('');\r\n    }\r\n\r\n    setSelectedFiles(prev => [...prev, ...validFiles]);\r\n  }, []);\r\n\r\n  const handleDrop = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.currentTarget.classList.remove('dragover');\r\n    handleFileSelect(e.dataTransfer.files);\r\n  }, [handleFileSelect]);\r\n\r\n  const handleDragOver = useCallback((e) => {\r\n    e.preventDefault();\r\n  }, []);\r\n\r\n  const handleDragEnter = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.currentTarget.classList.add('dragover');\r\n  }, []);\r\n\r\n  const handleDragLeave = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.currentTarget.classList.remove('dragover');\r\n  }, []);\r\n\r\n  const removeFile = useCallback((index) => {\r\n    setSelectedFiles(prev => prev.filter((_, i) => i !== index));\r\n  }, []);\r\n\r\n  const createNewCategory = async () => {\r\n    if (!newCategoryName.trim()) return null;\r\n    try {\r\n      const category = await createCategory({ name: newCategoryName.trim() });\r\n      return category._id;\r\n    } catch (error) {\r\n      setError('Failed to create category');\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (selectedFiles.length === 0) {\r\n      setError('Please select at least one file');\r\n      return;\r\n    }\r\n    let categoryId = selectedCategory;\r\n    if (isCreatingCategory) {\r\n      categoryId = await createNewCategory();\r\n      if (!categoryId) return;\r\n    }\r\n    if (!categoryId) {\r\n      setError('Please select or create a category');\r\n      return;\r\n    }\r\n    setUploading(true);\r\n    setError('');\r\n    try {\r\n      const formData = new FormData();\r\n      if (selectedFiles.length === 1) {\r\n        formData.append('image', selectedFiles[0]);\r\n        formData.append('title', title || selectedFiles[0].name);\r\n        formData.append('description', description);\r\n        formData.append('category', categoryId);\r\n        await uploadAd(formData, (progressEvent) => {\r\n          const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n          setUploadProgress(progress);\r\n        });\r\n      } else {\r\n        selectedFiles.forEach(file => {\r\n          formData.append('images', file);\r\n        });\r\n        const titles = selectedFiles.map(file => title || file.name);\r\n        const descriptions = selectedFiles.map(() => description);\r\n        formData.append('titles', JSON.stringify(titles));\r\n        formData.append('descriptions', JSON.stringify(descriptions));\r\n        formData.append('category', categoryId);\r\n        await uploadMultipleAds(formData, (progressEvent) => {\r\n          const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n          setUploadProgress(progress);\r\n        });\r\n      }\r\n      onSuccess();\r\n    } catch (error) {\r\n      setError('Upload failed. Please try again.');\r\n      console.error('Upload error:', error);\r\n    } finally {\r\n      setUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"modal-overlay\" onClick={onClose}>\r\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n          <div className=\"modal-header\">\r\n            <h2>Upload New Ad</h2>\r\n            <button className=\"close-btn\" onClick={onClose}>×</button>\r\n          </div>\r\n          <form className=\"upload-form\" onSubmit={handleSubmit}>\r\n            {error && <div className=\"error-message\">{error}</div>}\r\n\r\n            <div className=\"form-group\">\r\n              <label>Category</label>\r\n              <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>\r\n                <select\r\n                  className=\"form-control\"\r\n                  value={isCreatingCategory ? '' : selectedCategory}\r\n                  onChange={(e) => {\r\n                    setSelectedCategory(e.target.value);\r\n                    setIsCreatingCategory(false);\r\n                  }}\r\n                  disabled={isCreatingCategory}\r\n                  style={{ flex: 1 }}\r\n                >\r\n                  <option value=\"\">Select Category</option>\r\n                  {categories.map(cat => (\r\n                    <option key={cat._id} value={cat._id}>{cat.name}</option>\r\n                  ))}\r\n                </select>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-secondary\"\r\n                  onClick={() => setIsCreatingCategory(!isCreatingCategory)}\r\n                >\r\n                  {isCreatingCategory ? 'Cancel' : 'New'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {isCreatingCategory && (\r\n              <div className=\"form-group\">\r\n                <label>New Category Name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  value={newCategoryName}\r\n                  onChange={(e) => setNewCategoryName(e.target.value)}\r\n                  placeholder=\"Enter category name\"\r\n                  required\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"form-group\">\r\n              <label>Title {selectedFiles.length > 1 && '(will be applied to all files)'}</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                value={title}\r\n                onChange={(e) => setTitle(e.target.value)}\r\n                placeholder=\"Enter ad title (optional)\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label>Description {selectedFiles.length > 1 && '(will be applied to all files)'}</label>\r\n              <textarea\r\n                className=\"form-control\"\r\n                value={description}\r\n                onChange={(e) => setDescription(e.target.value)}\r\n                placeholder=\"Enter ad description (optional)\"\r\n                rows=\"3\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label>Images/Files</label>\r\n              <div className=\"upload-options\" style={{ display: \"flex\", flexDirection: \"column\", gap: \"12px\" }}>\r\n                <div\r\n                  className=\"file-drop-zone\"\r\n                  onDrop={handleDrop}\r\n                  onDragOver={handleDragOver}\r\n                  onDragEnter={handleDragEnter}\r\n                  onDragLeave={handleDragLeave}\r\n                  onClick={() => fileInputRef.current?.click()}\r\n                  style={{ cursor: \"pointer\" }}\r\n                >\r\n                  <p>Drag and drop files here or click to select</p>\r\n                  <p style={{ fontSize: '0.8rem', color: '#7f8c8d' }}>\r\n                    Supported: JPEG, PNG, PDF (Max 10MB each)\r\n                  </p>\r\n                </div>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn\"\r\n                  style={{\r\n                    background: \"#f3f4f6\",\r\n                    color: \"#23244c\",\r\n                    border: \"1px solid #d1d5db\",\r\n                    fontWeight: \"600\"\r\n                  }}\r\n                  onClick={() => cameraInputRef.current?.click()}\r\n                >\r\n                  <span style={{ fontSize: \"1.5rem\", marginRight: \"0.3rem\" }}>📷</span>\r\n                  Take Photo (use camera)\r\n                </button>\r\n              </div>\r\n\r\n              <input\r\n                ref={cameraInputRef}\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                capture=\"environment\"\r\n                style={{ display: 'none' }}\r\n                onChange={(e) => handleFileSelect(e.target.files)}\r\n              />\r\n              <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                multiple\r\n                accept=\".jpg,.jpeg,.png,.pdf\"\r\n                style={{ display: 'none' }}\r\n                onChange={(e) => handleFileSelect(e.target.files)}\r\n              />\r\n            </div>\r\n\r\n            {selectedFiles.length > 0 && (\r\n              <div className=\"file-preview\">\r\n                {selectedFiles.map((file, index) => (\r\n                  <div key={index} className=\"file-preview-item\">\r\n                    {file.type.startsWith('image/') ? (\r\n                      <>\r\n                        <img\r\n                          src={URL.createObjectURL(file)}\r\n                          alt={file.name}\r\n                          className=\"file-preview-image\"\r\n                        />\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"enhance-btn\"\r\n                          onClick={() => openImageEditor(file, index)}\r\n                          style={{\r\n                            position: 'absolute',\r\n                            bottom: '4px',\r\n                            left: '4px',\r\n                            background: '#4f46e5',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            borderRadius: '4px',\r\n                            padding: '2px 6px',\r\n                            fontSize: '10px',\r\n                            cursor: 'pointer'\r\n                          }}\r\n                        >\r\n                          ✨ Enhance\r\n                        </button>\r\n                      </>\r\n                    ) : (\r\n                      <div className=\"file-preview-image\" style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        background: '#ecf0f1',\r\n                        fontSize: '12px',\r\n                        textAlign: 'center'\r\n                      }}>\r\n                        PDF\r\n                      </div>\r\n                    )}\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"file-remove-btn\"\r\n                      onClick={() => removeFile(index)}\r\n                    >\r\n                      ×\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            {uploading && (\r\n              <div className=\"upload-progress\">\r\n                <div\r\n                  className=\"upload-progress-bar\"\r\n                  style={{ width: `${uploadProgress}%` }}\r\n                />\r\n                <p style={{ textAlign: 'center', marginTop: '10px' }}>\r\n                  Uploading... {uploadProgress}%\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            <div style={{ display: 'flex', gap: '10px', marginTop: '20px' }}>\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn btn-primary\"\r\n                disabled={uploading || selectedFiles.length === 0}\r\n                style={{ flex: 1 }}\r\n              >\r\n                {uploading ? 'Uploading...' : `Upload ${selectedFiles.length} file(s)`}\r\n              </button>\r\n              <button type=\"button\" className=\"btn btn-secondary\" onClick={onClose}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Image Enhancement Modal */}\r\n      {showImageEditor && (\r\n        <div className=\"modal-overlay\" style={{ zIndex: 3000 }}>\r\n          <div className=\"modal-content\" style={{ maxWidth: '800px' }} onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h2>🔧 Enhance Document</h2>\r\n              <button className=\"close-btn\" onClick={() => setShowImageEditor(false)}>×</button>\r\n            </div>\r\n            \r\n            <div style={{ padding: '1.5rem' }}>\r\n              <div style={{ marginBottom: '1.5rem', textAlign: 'center' }}>\r\n                <img\r\n                  src={URL.createObjectURL(currentEditingImage)}\r\n                  alt=\"Preview\"\r\n                  style={{\r\n                    maxWidth: '100%',\r\n                    maxHeight: '300px',\r\n                    border: '2px solid #e5e7eb',\r\n                    borderRadius: '8px'\r\n                  }}\r\n                />\r\n              </div>\r\n              \r\n              <div style={{ marginBottom: '1.5rem' }}>\r\n                <h3 style={{ marginBottom: '1rem', color: '#374151' }}>Choose Enhancement:</h3>\r\n                <div style={{ \r\n                  display: 'grid', \r\n                  gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', \r\n                  gap: '0.75rem' \r\n                }}>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn\"\r\n                    onClick={() => applyFilterAndSave('auto')}\r\n                    style={{\r\n                      background: 'linear-gradient(135deg, #4f46e5, #7c3aed)',\r\n                      color: 'white',\r\n                      border: 'none',\r\n                      padding: '0.75rem',\r\n                      fontSize: '0.875rem',\r\n                      fontWeight: '600'\r\n                    }}\r\n                  >\r\n                    🚀 Auto Scan\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn\"\r\n                    onClick={() => applyFilterAndSave('blackwhite')}\r\n                    style={{\r\n                      background: '#1f2937',\r\n                      color: 'white',\r\n                      border: 'none',\r\n                      padding: '0.75rem',\r\n                      fontSize: '0.875rem',\r\n                      fontWeight: '600'\r\n                    }}\r\n                  >\r\n                    ⚫ Black & White\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn\"\r\n                    onClick={() => applyFilterAndSave('grayscale')}\r\n                    style={{\r\n                      background: '#6b7280',\r\n                      color: 'white',\r\n                      border: 'none',\r\n                      padding: '0.75rem',\r\n                      fontSize: '0.875rem',\r\n                      fontWeight: '600'\r\n                    }}\r\n                  >\r\n                    🌫️ Grayscale\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn\"\r\n                    onClick={() => applyFilterAndSave('whitening')}\r\n                    style={{\r\n                      background: '#f3f4f6',\r\n                      color: '#374151',\r\n                      border: '2px solid #d1d5db',\r\n                      padding: '0.75rem',\r\n                      fontSize: '0.875rem',\r\n                      fontWeight: '600'\r\n                    }}\r\n                  >\r\n                    ☀️ Whitening\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn\"\r\n                    onClick={() => applyFilterAndSave('sharpen')}\r\n                    style={{\r\n                      background: '#10b981',\r\n                      color: 'white',\r\n                      border: 'none',\r\n                      padding: '0.75rem',\r\n                      fontSize: '0.875rem',\r\n                      fontWeight: '600'\r\n                    }}\r\n                  >\r\n                    🔍 Sharpen\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn\"\r\n                    onClick={() => applyFilterAndSave('vintage')}\r\n                    style={{\r\n                      background: '#d97706',\r\n                      color: 'white',\r\n                      border: 'none',\r\n                      padding: '0.75rem',\r\n                      fontSize: '0.875rem',\r\n                      fontWeight: '600'\r\n                    }}\r\n                  >\r\n                    📜 Vintage\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              <div style={{ textAlign: 'center' }}>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-secondary\"\r\n                  onClick={() => setShowImageEditor(false)}\r\n                  style={{ padding: '0.75rem 1.5rem' }}\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UploadForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}